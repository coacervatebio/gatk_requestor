## Tutorial Env

# General
sudo dnf update -y
sudo dnf install libffi-devel #for poetry goth
sudo dnf install pip python-devel screen -y
pip install yapapi gvmkit-build

# yagna & gftp
wget https://github.com/golemfactory/yagna/releases/download/v0.10.1/golem-requestor-linux-v0.10.1.tar.gz
tar -xzf golem-requestor-linux-v0.10.1.tar.gz
mv golem-requestor-linux-v0.10.1/* ~/.local/bin/

# Docker
sudo dnf config-manager --add-repo https://download.docker.com/linux/fedora/docker-ce.repo
sudo dnf install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin
sudo systemctl enable docker && sudo systemctl start docker
sudo usermod -aG docker $USER #login/logout, allows non-root docker, required for gvmkit-build

# Configure yagna keys
yagna service run & #just on startup
yagna app-key create requestor
yagna payment fund
yagna payment init --sender
export YAGNA_APPKEY=32-char-key

## Goth - instruction at https://github.com/golemfactory/goth
curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python -
docker login docker.pkg.github.com -u {username} #passwd is access token

## ~/.bash_profile aliases / exports
export GITHUB_API_TOKEN=
alias rg='screen -d -m python -m goth start ~/goth/my-assets/goth-config.yml' #run goth, must be in poetry venv
alias rc='docker ps -aq | xargs docker stop | xargs docker rm' #remove containers
alias se='source /tmp/goth_interactive.env' #set env vars from goth